<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Pokemon Card</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: transparent;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  overflow: hidden;
}

.card {
  width: 180px;
  min-height: 220px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 15px;
  padding: 15px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
  color: white;
  opacity: 0;
  transform: scale(0.9) translateY(10px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.card.visible {
  opacity: 1;
  transform: scale(1) translateY(0);
}

.card-header {
  text-align: center;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 2px solid rgba(255, 255, 255, 0.2);
}

.pokemon-name {
  font-size: 1.4em;
  font-weight: bold;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  margin-bottom: 5px;
}

.pokemon-level {
  font-size: 0.9em;
  opacity: 0.9;
}

.bars-container {
  margin-bottom: 15px;
}

.bar-wrapper {
  margin-bottom: 10px;
}

.bar-label {
  font-size: 0.8em;
  opacity: 0.9;
  margin-bottom: 3px;
  display: flex;
  justify-content: space-between;
}

.bar-bg {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  overflow: hidden;
  height: 12px;
}

.bar-fill {
  height: 100%;
  transition: width 0.4s ease;
  border-radius: 10px;
}

.hp-fill {
  background: linear-gradient(90deg, #4ade80 0%, #22c55e 100%);
}

.xp-fill {
  background: linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%);
}

.stats-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-top: 15px;
}

.stat-item {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 8px;
  text-align: center;
  backdrop-filter: blur(10px);
}

.stat-icon {
  font-size: 1.2em;
  margin-bottom: 2px;
}

.stat-label {
  font-size: 0.7em;
  opacity: 0.8;
  margin-bottom: 3px;
}

.stat-value {
  font-size: 1.1em;
  font-weight: bold;
}

.wild-badge {
  background: rgba(255, 100, 100, 0.9);
  color: white;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 0.7em;
  font-weight: bold;
  display: inline-block;
  margin-top: 5px;
}
</style>
</head>
<body>
<div class="card" id="card">
  <div class="card-header">
    <div class="pokemon-name" id="pokemonName">...</div>
    <div class="pokemon-level" id="pokemonLevel">N√≠vel ?</div>
    <div id="wildBadge" style="display: none;" class="wild-badge">SELVAGEM</div>
  </div>

  <div class="bars-container">
    <div class="bar-wrapper">
      <div class="bar-label">
        <span>‚ù§Ô∏è HP</span>
        <span id="hpText">?/?</span>
      </div>
      <div class="bar-bg">
        <div class="bar-fill hp-fill" id="hpFill" style="width: 100%"></div>
      </div>
    </div>

    <div class="bar-wrapper">
      <div class="bar-label">
        <span>‚≠ê XP</span>
        <span id="xpText">0/100</span>
      </div>
      <div class="bar-bg">
        <div class="bar-fill xp-fill" id="xpFill" style="width: 0%"></div>
      </div>
    </div>
  </div>

  <div class="stats-grid">
    <div class="stat-item">
      <div class="stat-icon">‚öîÔ∏è</div>
      <div class="stat-label">Ataque</div>
      <div class="stat-value" id="attackValue">?</div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">üõ°Ô∏è</div>
      <div class="stat-label">Defesa</div>
      <div class="stat-value" id="defenseValue">?</div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">‚ö°</div>
      <div class="stat-label">Velocidade</div>
      <div class="stat-value" id="speedValue">?</div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">üéØ</div>
      <div class="stat-label">HP M√°x</div>
      <div class="stat-value" id="maxHpValue">?</div>
    </div>
  </div>
</div>

<script>
const { ipcRenderer } = require('electron');

const card = document.getElementById('card');
const elements = {
  name: document.getElementById('pokemonName'),
  level: document.getElementById('pokemonLevel'),
  wildBadge: document.getElementById('wildBadge'),
  hpText: document.getElementById('hpText'),
  hpFill: document.getElementById('hpFill'),
  xpText: document.getElementById('xpText'),
  xpFill: document.getElementById('xpFill'),
  attack: document.getElementById('attackValue'),
  defense: document.getElementById('defenseValue'),
  speed: document.getElementById('speedValue'),
  maxHp: document.getElementById('maxHpValue')
};

function updateCard(data) {
  console.log('[Card] Atualizando com dados:', data);
  
  // Nome e n√≠vel
  elements.name.textContent = data.name || 'Unknown';
  elements.level.textContent = `N√≠vel ${data.level || 1}`;
  
  // Badge de selvagem
  if (data.isWild) {
    elements.wildBadge.style.display = 'inline-block';
  } else {
    elements.wildBadge.style.display = 'none';
  }
  
  // HP
  const hp = data.hp || 0;
  const maxHp = data.maxHp || 1;
  const hpPercent = (hp / maxHp) * 100;
  elements.hpText.textContent = `${hp}/${maxHp}`;
  elements.hpFill.style.width = `${hpPercent}%`;
  
  // XP
  const xp = data.xp || 0;
  const xpNeeded = (data.level || 1) * 100;
  const xpPercent = (xp / xpNeeded) * 100;
  elements.xpText.textContent = `${xp}/${xpNeeded}`;
  elements.xpFill.style.width = `${xpPercent}%`;
  
  // Stats
  elements.attack.textContent = data.attack || 0;
  elements.defense.textContent = data.defense || 0;
  elements.speed.textContent = data.speed || 0;
  elements.maxHp.textContent = maxHp;
  
  // Mostra card
  setTimeout(() => {
    card.classList.add('visible');
  }, 50);
}

// Listeners
ipcRenderer.on('update-card-data', (event, data) => {
  updateCard(data);
});

// Esconde card quando janela perde foco
window.addEventListener('blur', () => {
  card.classList.remove('visible');
});
</script>
</body>
</html>